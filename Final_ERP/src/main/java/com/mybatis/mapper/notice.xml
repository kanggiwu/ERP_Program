<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.mybatis.mapper.NoticeMapper">

	<!-- 공지 리스트 가져오기 -->  
	<select id="getNoticeList" parameterType="int" resultType="map"> 
	SELECT notice_no, notice_type, notice_title, notice_content, notice_date
  	  FROM      notice
  	 WHERE notice_type = #{notice_type}
  	 ORDER BY notice_date DESC
	</select>
	
	<!-- 공지 리스트 검색 --> <!-- 추가예정 부분은 Dao 작성시 자바 변수명을 확인하여 추가 -->
	<select id="getNoticeList" parameterType="int" resultType="map"> 
	SELECT notice_no, notice_type, notice_title, notice_content, notice_date
  	  FROM      notice
  	 WHERE notice_type = #{notice_type}
  	 <if test='#{추가예정} != null'>
  	 	AND notice_title LIKE '%'||#{추가예정}||'%'
  	 </if>
  	 ORDER BY notice_date DESC
	</select>
	
	
	<!-- 신규 공지 등록 -->
	<insert id="insertNotice" parameterType="map">
		INSERT INTO notice (notico_no, notice_type, notice_title, notice_content, notice_date)
                 VALUES (#{seq_notice}, #{notice_type}, #{notice_title}, #{notice_content}, SYSDATE)
	</insert>
	
	<!-- 공지 수정 -->
	<update id="updateNotice" parameterType="map">
		UPDATE notice
		 SET
			notice_type = #{notice_type},
			notice_title = #{notice_title},
			notice_content = #{notice_content},
			notice_date = SYSDATE
		WHERE notice_no = #{notice_no}
	</update>
	
	<!-- 공지 삭제 -->		
	<delete id="deleteNotice" parameterType="int">
		DELETE notice WHERE notice_no = #{notice_no};
	</delete>

</mapper>